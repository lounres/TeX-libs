\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{solutions}[09.2020 Lightweigth framework for writing solutions of listed problems.]

\RequirePackage{frequent-stuff}
\RequirePackage{tocloft}

\newtheorem{xtheorem}{Теорема}
\newenvironment{theorem}{
    \begin{xtheorem}
    \addcontentsline{toc}{subsubsection}{Теорема \thextheorem}
}{
    \end{xtheorem}
}
\newtheorem{xlemma}[xtheorem]{Лемма}
\newenvironment{lemma}{
    \begin{xlemma}
    \addcontentsline{toc}{subsubsection}{Лемма \thexlemma}
}{
    \end{xlemma}
}
\newtheorem{xcorollary}{Следствие}[xtheorem]
\newenvironment{corollary}{
    \begin{xcorollary}
    \addcontentsline{toc}{subsubsection}{Следствие \thexcorollary}
}{
    \end{xcorollary}
}

\theoremstyle{definition}
\newtheorem{prb}{Задача}
\newenvironment{problem}[1]{
    \setcounter{prb}{#1}
    \addtocounter{prb}{-1}
    \begin{prb}
    \addcontentsline{toc}{subsection}{Задача #1}
}{
    \end{prb}
    \NormalizeEnumerate
    \breaker
}
\newtheorem{enumprb}{Задача}
\newenvironment{enumproblem}{
    \begin{enumprb}
    \addcontentsline{toc}{subsection}{Задача \theenumprb}
}{
    \end{enumprb}
    \NormalizeEnumerate
    \breaker
}
\newtheorem*{problem*}{Задача}
\newtheorem{definition}{Определение}

\theoremstyle{remark}
\newtheorem{remark}{Замечание}
\newtheorem*{remark*}{Замечание}

\newcommand{\breaker}{\noindent\makebox[\linewidth]{\rule{\textwidth}{0.4pt}}}

\newcommand{\NormalizeEnumerate}{
    \renewcommand{\theenumi}{\arabic{enumi}}
    \renewcommand{\labelenumi}{\theenumi.}
    \renewcommand{\theenumii}{\asbuk{enumii}}
    \renewcommand{\labelenumii}{(\theenumii)}
    \renewcommand{\theenumiii}{\roman{enumiii}}
    \renewcommand{\labelenumiii}{\theenumiii.}
    \renewcommand{\theenumiv}{\Asbuk{enumiv}}
    \renewcommand{\labelenumiv}{\theenumiv.}
}

\newcommand{\ItemedProblem}{
    \renewcommand{\theenumi}{\asbuk{enumi}}
    \renewcommand{\labelenumi}{\theenumi)}
    \renewcommand{\theenumii}{\arabic{enumii}}
    \renewcommand{\labelenumii}{\theenumii.}
    \renewcommand{\theenumiii}{\roman{enumiii}}
    \renewcommand{\labelenumiii}{\theenumiii.}
    \renewcommand{\theenumiv}{\Asbuk{enumiv}}
    \renewcommand{\labelenumiv}{\theenumiv.}
}